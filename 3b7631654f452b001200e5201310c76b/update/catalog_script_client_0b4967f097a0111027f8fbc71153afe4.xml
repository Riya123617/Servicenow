<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="catalog_script_client">
    <catalog_script_client action="INSERT_OR_UPDATE">
        <active>true</active>
        <applies_catalog>true</applies_catalog>
        <applies_extended>false</applies_extended>
        <applies_req_item>false</applies_req_item>
        <applies_sc_task>false</applies_sc_task>
        <applies_target_record>false</applies_target_record>
        <applies_to>item</applies_to>
        <cat_item display_value="test12">e949e3f097a0111027f8fbc71153af13</cat_item>
        <cat_variable>IO:124927f097a0111027f8fbc71153af6c</cat_variable>
        <condition/>
        <description>This script is auto created thorugh runtime module for checking application name on submit.</description>
        <field/>
        <global>true</global>
        <isolate_script>false</isolate_script>
        <messages/>
        <name>Get Subnet Info on project change</name>
        <order>600</order>
        <script><![CDATA[function onChange(control, oldValue, newValue, isLoading) { if (newValue == '') { return; } var portal_check; var portalgr = new GlideAjax('x_nuta2_nutanix_ca.Nutanix_ClientServerScriptBridge'); portalgr.addParam('sysparm_name', 'getPortalCompatibility'); portalgr.getXMLAnswer(getPortalCheck); function getPortalCheck(response) { portal_check = response; if (portal_check == 'false') { var clusterJSON = {}; var catalogSysId = g_form.getUniqueValue(); var ga = new GlideAjax('x_nuta2_nutanix_ca.Nutanix_ClientServerScriptBridge'); ga.addParam('sysparm_name', 'getSubnet'); ga.addParam('sysparm_catSysID', catalogSysId); ga.addParam('sysparm_ProjectUuid', newValue); ga.getXML(processAnswer); function processAnswer(response) { var ans = response.responseXML.documentElement.getAttribute('answer'); sessionStorage['clusterName_' + g_form.getUniqueValue()] = ans; ans = JSON.parse(ans); var catalog_clusterJSON = ans.catalog_data; clusterJSON = ans.cluster_info; var nicList = []; for (var m in clusterJSON) { nicList.push(clusterJSON[m].subnet); } for (var k in catalog_clusterJSON) { for (var i in catalog_clusterJSON[k].nics) { if (catalog_clusterJSON[k].value + '') { for (var l in clusterJSON) { var subnetList = clusterJSON[l].subnet; if (l != catalog_clusterJSON[k].value + '') for (var s in subnetList) { /*g_form.removeOption(catalog_clusterJSON[k].nics[i] + '', s);*/ } } } { var opt = g_form.getElement(catalog_clusterJSON[k].nics[i] + ''); var n=0; if(opt.options) { n = opt.options.length; } for (var x = 1; x < n; x++) { var present = false; var val = opt.options[x].value + ''; for (var s = 0; s < nicList.length; s++) { if (nicList[s][val]) { present = true; break; } } if (!present) { g_form.removeOption(catalog_clusterJSON[k].nics[i] + '', opt.options[x].value + ''); x--; n--; } } } } } } } else { try { var clusterJSON = {}; var catalogSysId = g_form.getUniqueValue(); var ga = new GlideAjax('x_nuta2_nutanix_ca.Nutanix_ClientServerScriptBridge'); ga.addParam('sysparm_name', 'getSubnet'); ga.addParam('sysparm_catSysID', catalogSysId); ga.addParam('sysparm_ProjectUuid', newValue); ga.addParam('sysparm_ProjectUuid', newValue); ga.getXML(processAnswer); function processAnswer(response) { var ans = response.responseXML.documentElement.getAttribute('answer'); sessionStorage['clusterName_' + g_form.getUniqueValue()] = ans; ans = JSON.parse(ans); var catalog_clusterJSON = ans.catalog_data; clusterJSON = ans.cluster_info; var nicList = []; for (var m in clusterJSON) { nicList.push(clusterJSON[m].subnet); } var nic_variable_namme = []; for (var n in catalog_clusterJSON) { var nics = catalog_clusterJSON[n].nics; for (var k in nics) nic_variable_namme.push(nics[k]); } var catNicJson = { "nic": nic_variable_namme, "nicList": nicList }; var ga = new GlideAjax('x_nuta2_nutanix_ca.Nutanix_ClientServerScriptBridge'); ga.addParam('sysparm_name', 'setSubnet'); ga.addParam('sysparm_catSysID', catalogSysId); ga.addParam('sysparm_catNicJson', JSON.stringify(catNicJson)); ga.getXML(processAnswer1); function processAnswer1(response) { var ans = response.responseXML.documentElement.getAttribute('answer'); } } } catch (err) {} } } }]]></script>
        <sys_class_name>catalog_script_client</sys_class_name>
        <sys_created_by>system</sys_created_by>
        <sys_created_on>2022-07-05 13:20:21</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>0b4967f097a0111027f8fbc71153afe4</sys_id>
        <sys_mod_count>1</sys_mod_count>
        <sys_name>Get Subnet Info on project change</sys_name>
        <sys_overrides/>
        <sys_package display_value="Global" source="global">global</sys_package>
        <sys_policy>protected</sys_policy>
        <sys_scope display_value="Nutanix Calm">3b7631654f452b001200e5201310c76b</sys_scope>
        <sys_update_name>catalog_script_client_0b4967f097a0111027f8fbc71153afe4</sys_update_name>
        <sys_updated_by>system</sys_updated_by>
        <sys_updated_on>2022-07-05 13:20:21</sys_updated_on>
        <table/>
        <type>onChange</type>
        <ui_type>10</ui_type>
        <variable_set/>
        <view/>
    </catalog_script_client>
</record_update>
